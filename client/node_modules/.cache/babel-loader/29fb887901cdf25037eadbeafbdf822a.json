{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yashs\\\\Desktop\\\\Computer Science\\\\Web Development\\\\Projects\\\\Hackethons\\\\EPIC TVS\\\\EZ-Discounting\\\\client\\\\src\\\\components\\\\user\\\\UserView.js\";\nimport React, { Component } from 'react';\nimport { Row, Col, ListGroup, ListGroupItem, Container, Tabs, Tab, Button } from 'react-bootstrap';\nimport CreateInvoice from './CreateInvoice';\nimport { isNonEmptyArray } from '../../utils/ObjectUtils';\nimport { checkIfPaymentStatusUpdate } from '../../utils/ObjectUtils';\nimport UserInvoiceList from './UserInvoiceList';\nimport './user.scss';\nexport default class UserView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.listenForInvoicePayments = () => {\n      const self = this;\n      this.timer = setInterval(function () {\n        self.props.getPreviousInvoices();\n      }, 1000);\n    };\n\n    this.showDialog = () => {\n      this.setState({\n        dialogVisible: true\n      });\n    };\n\n    this.handleCloseDialog = () => {\n      this.setState({\n        dialogVisible: false\n      });\n    };\n\n    this.homeTabToggle = toggle => {\n      this.setState({\n        toggle: toggle\n      });\n    };\n\n    this.state = {\n      toggle: 'unpaid',\n      dialogVisible: false,\n      pendingTransactions: []\n    };\n  }\n\n  componentWillMount() {\n    this.props.getPreviousInvoices();\n    this.listenForInvoicePayments();\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {\n      user: {\n        previousInvoices,\n        success\n      }\n    } = nextProps; // console.log(success);\n\n    if (previousInvoices && this.props.user.previousInvoices.length > 0) {\n      let invoiceDiff = checkIfPaymentStatusUpdate(previousInvoices, this.props.user.previousInvoices);\n\n      if (isNonEmptyArray(invoiceDiff)) {\n        let currentPendingTransactions = this.state.pendingTransactions;\n        currentPendingTransactions.push(invoiceDiff);\n        this.setState({\n          pendingTransactions: currentPendingTransactions\n        });\n      }\n    }\n  }\n\n  render() {\n    const {\n      dialogVisible,\n      pendingTransactions\n    } = this.state;\n    const {\n      user\n    } = this.props;\n    let invoiceList = React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    });\n\n    if (user.previousInvoices.length > 0) {\n      invoiceList = React.createElement(UserInvoiceList, {\n        previousInvoices: user.previousInvoices,\n        toggle: this.state.toggle,\n        payInvoice: this.props.payInvoice,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      });\n    } else {\n      invoiceList = React.createElement(\"div\", {\n        className: \"empty-list-container empty-user-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"No invoices to show here.\");\n    }\n\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(CreateInvoice, {\n      dialogVisible: dialogVisible,\n      handleCloseDialog: this.handleCloseDialog,\n      submitInvoice: this.props.submitInvoice,\n      success: user.success,\n      initializeSuccess: this.props.initializeSuccess,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(Row, {\n      className: \"add-invoice-btn-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.showDialog,\n      className: \"add-invoice-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Submit New Invoice\")), React.createElement(Col, {\n      lg: 9,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    })), React.createElement(Tabs, {\n      defaultActiveKey: \"unpaid\",\n      id: \"home-view-tab\",\n      onSelect: this.homeTabToggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(Tab, {\n      eventKey: \"unpaid\",\n      title: \"Payment Pending\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(ListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(ListGroupItem, {\n      className: \"list-table-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, invoiceList))))), React.createElement(Tab, {\n      eventKey: \"paid\",\n      title: \"Payment Received\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(ListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(ListGroupItem, {\n      className: \"list-table-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, invoiceList)))))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/yashs/Desktop/Computer Science/Web Development/Projects/Hackethons/EPIC TVS/EZ-Discounting/client/src/components/user/UserView.js"],"names":["React","Component","Row","Col","ListGroup","ListGroupItem","Container","Tabs","Tab","Button","CreateInvoice","isNonEmptyArray","checkIfPaymentStatusUpdate","UserInvoiceList","UserView","constructor","props","listenForInvoicePayments","self","timer","setInterval","getPreviousInvoices","showDialog","setState","dialogVisible","handleCloseDialog","homeTabToggle","toggle","state","pendingTransactions","componentWillMount","componentWillUnmount","clearInterval","componentWillReceiveProps","nextProps","user","previousInvoices","success","length","invoiceDiff","currentPendingTransactions","push","render","invoiceList","payInvoice","submitInvoice","initializeSuccess"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Row, Col, ListGroup, ListGroupItem, Container, Tabs, Tab, Button } from 'react-bootstrap';\nimport CreateInvoice from './CreateInvoice';\nimport { isNonEmptyArray } from '../../utils/ObjectUtils';\nimport { checkIfPaymentStatusUpdate } from '../../utils/ObjectUtils';\nimport UserInvoiceList from './UserInvoiceList';\nimport './user.scss';\n\nexport default class UserView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { toggle: 'unpaid', dialogVisible: false, pendingTransactions: [] };\n  }\n  componentWillMount() {\n    this.props.getPreviousInvoices();\n\n    this.listenForInvoicePayments();\n  }\n\n\n\n  listenForInvoicePayments = () => {\n    const self = this;\n    this.timer = setInterval(function() {\n      self.props.getPreviousInvoices();\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n  componentWillReceiveProps(nextProps) {\n    const { user: { previousInvoices , success} } = nextProps;\n    // console.log(success);\n    if (previousInvoices && this.props.user.previousInvoices.length > 0) {\n      let invoiceDiff = checkIfPaymentStatusUpdate(previousInvoices, this.props.user.previousInvoices);\n      if (isNonEmptyArray(invoiceDiff)) {\n        let currentPendingTransactions = this.state.pendingTransactions;\n        currentPendingTransactions.push(invoiceDiff);\n        this.setState({ pendingTransactions: currentPendingTransactions })\n      }\n    }\n  }\n\n  showDialog = () => {\n    this.setState({ dialogVisible: true });\n  }\n\n  handleCloseDialog = () => {\n    this.setState({ dialogVisible: false });\n  }\n\n  homeTabToggle = (toggle) => {\n    \n    this.setState({ toggle: toggle });\n  }\n\n  render() {\n    const { dialogVisible, pendingTransactions} = this.state;\n    const { user } = this.props;\n\n    let invoiceList = <span/>;\n    if (user.previousInvoices.length > 0) {\n      invoiceList = <UserInvoiceList previousInvoices={user.previousInvoices} toggle={this.state.toggle} payInvoice={this.props.payInvoice}/>;\n    }\n    else {\n      invoiceList = <div className=\"empty-list-container empty-user-list\">No invoices to show here.</div>\n    }\n    return (\n      <Container>\n      <CreateInvoice dialogVisible={dialogVisible} handleCloseDialog={this.handleCloseDialog} submitInvoice={this.props.submitInvoice} success={user.success} initializeSuccess={this.props.initializeSuccess}/>\n      <Row className=\"add-invoice-btn-row\">\n        <Col lg={3}>\n        <Button onClick={this.showDialog} className=\"add-invoice-btn\">Submit New Invoice</Button>\n        </Col>\n        <Col lg={9}>\n        \n        </Col>\n      </Row>\n      \n      <Tabs defaultActiveKey=\"unpaid\" id=\"home-view-tab\" onSelect={this.homeTabToggle}>\n            <Tab eventKey=\"unpaid\" title=\"Payment Pending\">\n              <ListGroup>\n                <ListGroupItem className=\"list-table-header\"> \n                  <Row> \n                    <Col lg={12}>\n                      {invoiceList}\n                    </Col>\n                  </Row>\n                </ListGroupItem>\n              </ListGroup>\n            </Tab>\n            <Tab eventKey=\"paid\" title=\"Payment Received\">\n              <ListGroup>\n                <ListGroupItem className=\"list-table-header\"> \n                <Row> \n                    <Col lg={12}>\n                      {invoiceList}\n                    </Col>\n                  </Row>\n                </ListGroupItem>\n                \n              </ListGroup>\n            </Tab>\n        </Tabs>  \n      </Container>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}