{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yashs\\\\Desktop\\\\Computer Science\\\\Web Development\\\\Projects\\\\Hackethons\\\\EPIC TVS\\\\EZ-Discounting\\\\client\\\\src\\\\components\\\\user\\\\CreateInvoice.js\";\nimport React, { Component } from 'react';\nimport { Modal, Button, Form, Row, Col } from 'react-bootstrap';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport './user.scss';\nimport InvoiceContract from './Invoices.json';\n\nconst Web3 = require('web3');\n\nvar util = require('web3-utils'); // const [selectedInvoiceDate, setselectedInvoiceDate] = useState(null);\n\n\nexport default class CreateInvoice extends Component {\n  constructor(props) {\n    super(props);\n\n    this.submitInvoice = () => {\n      const {\n        address,\n        pay,\n        type,\n        hours,\n        label,\n        description,\n        perHour,\n        selectedInvoiceDate,\n        selectedFinanceDate,\n        invoiceNumber,\n        customerName,\n        amount,\n        items,\n        storeItem,\n        discount\n      } = this.state;\n      const sender_address = window.ethereum.selectedAddress;\n      console.log(\"Sender address is : \" + sender_address);\n      const payload = {\n        sender_address: sender_address.toLowerCase(),\n        recipient_address: address.toLowerCase(),\n        amount: amount,\n        description,\n        label,\n        selectedInvoiceDate,\n        selectedFinanceDate,\n        invoiceNumber,\n        customerName,\n        amount,\n        storeItem,\n        discount\n      };\n      this.props.submitInvoice(payload); // this.props.handleCloseDialog();\n    };\n\n    this.checkInvoice = () => {\n      const {\n        invoiceNumber\n      } = this.state; // const web3 = window.web3;\n\n      const web3 = new Web3(new Web3.providers.HttpProvider(\"http://localhost:8545\"));\n      const currAddress = window.ethereum.selectedAddress;\n      let abi = InvoiceContract.abi;\n      let contractAddress = InvoiceContract.networks[5777].address;\n      var myContract = new web3.eth.Contract(abi, contractAddress);\n      let ok = myContract.methods.checkInvoice(currAddress, invoiceNumber).call();\n      console.log(ok);\n    };\n\n    this.addItem = () => {\n      const {\n        items,\n        itemName,\n        itemQuantity,\n        itemPrice,\n        amount\n      } = this.state;\n      items.push({\n        itemName: itemName,\n        itemQuantity: itemQuantity,\n        itemPrice: itemPrice\n      });\n      this.setState({\n        storeItem: JSON.stringify(items)\n      });\n      this.setState({\n        items: items\n      });\n      this.setState({\n        itemName: '',\n        itemQuantity: '',\n        itemPrice: ''\n      });\n      this.setState({\n        amount: amount + parseFloat(itemQuantity) * parseFloat(itemPrice)\n      }); // var li = document.createElement(\"li\");\n      // li.className = 'list-group-item';\n      // li.textContent =itemName;\n      // ul.appendChild(li);\n    };\n\n    this.perHourToggle = evt => {\n      this.setState({\n        perHour: evt.target.checked,\n        perProject: !evt.target.checked\n      });\n    };\n\n    this.perProjectToggle = evt => {\n      this.setState({\n        perProject: evt.target.checked,\n        perHour: !evt.target.checked\n      });\n    };\n\n    this.hoursChanged = evt => {\n      this.setState({\n        hours: evt.target.value\n      });\n    };\n\n    this.payChanged = evt => {\n      this.setState({\n        pay: evt.target.value\n      });\n    };\n\n    this.managerAddressChanged = evt => {\n      this.setState({\n        address: evt.target.value\n      });\n    };\n\n    this.labelChanged = evt => {\n      this.setState({\n        label: evt.target.value\n      });\n    };\n\n    this.descriptionChanged = evt => {\n      this.setState({\n        description: evt.target.value\n      });\n    };\n\n    this.InvoiceDateChanged = date => {\n      this.setState({\n        selectedInvoiceDate: date\n      });\n    };\n\n    this.FinanceDateChanged = date => {\n      this.setState({\n        selectedFinanceDate: date\n      });\n    };\n\n    this.invoiceNumberChanged = evt => {\n      this.setState({\n        invoiceNumber: evt.target.value\n      });\n    };\n\n    this.CustomerNameChanged = evt => {\n      this.setState({\n        customerName: evt.target.value\n      });\n    };\n\n    this.amountChanged = evt => {\n      this.setState({\n        amount: evt.target.value\n      });\n    };\n\n    this.itemNameChanged = evt => {\n      this.setState({\n        itemName: evt.target.value\n      });\n    };\n\n    this.itemQuantityChanged = evt => {\n      this.setState({\n        itemQuantity: evt.target.value\n      });\n    };\n\n    this.itemPriceChanged = evt => {\n      this.setState({\n        itemPrice: evt.target.value\n      });\n    };\n\n    this.state = {\n      address: '',\n      pay: 0,\n      type: '',\n      hours: 0,\n      perHour: true,\n      perProject: false,\n      label: '',\n      description: '',\n      selectedInvoiceDate: '',\n      selectedFinanceDate: '',\n      invoiceNumber: '',\n      customerName: '',\n      amount: 0,\n      items: [],\n      storeItem: '',\n      success: 'init',\n      discount: 15\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {\n      success,\n      dialogVisible\n    } = nextProps;\n    this.setState({\n      success: success\n    });\n\n    if (success == 'init') {} else if (success == 'success') {\n      if (dialogVisible) {\n        this.props.handleCloseDialog();\n      } else {\n        //change success to 'init'\n        this.props.initializeSuccess();\n      }\n    } else if (success == 'failure') {}\n  }\n\n  render() {\n    const {\n      success\n    } = this.props; // console.log(success);\n\n    const {\n      dialogVisible,\n      handleCloseDialog\n    } = this.props;\n    const {\n      pay,\n      description,\n      perHour,\n      perProject,\n      hours,\n      address,\n      label,\n      selectedInvoiceDate,\n      selectedFinanceDate,\n      invoiceNumber,\n      customerName,\n      amount,\n      itemName,\n      itemQuantity,\n      itemPrice,\n      discount\n    } = this.state;\n    let alertMessage = React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    });\n\n    if (this.state.success == 'failure') {\n      alertMessage = React.createElement(\"div\", {\n        class: \"alert alert-danger\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Alert! You have already submitted an invoice discounting request with the same invoice number!\");\n    }\n\n    let currentPayForm = React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    });\n\n    if (perHour) {\n      currentPayForm = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Enter amount\",\n        value: pay,\n        onChange: this.payChanged,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(Form.Text, {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Enter the amount (Ether)\")), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Enter hours\",\n        value: hours,\n        onChange: this.hoursChanged,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), React.createElement(Form.Text, {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Enter the hours\"))));\n    } else {\n      currentPayForm = React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Enter amount\",\n        value: pay,\n        onChange: this.payChanged,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }), React.createElement(Form.Text, {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Enter the amount (Ether)\"));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      show: dialogVisible,\n      onHide: handleCloseDialog,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Submit a new invoice\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, alertMessage, React.createElement(Form.Group, {\n      controlId: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Invoice Number\"), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Enter the unique invoice number\",\n      value: invoiceNumber,\n      onChange: this.invoiceNumberChanged,\n      autocomplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"formBasicEmail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Enter the Account number of the Invoice Financing Company\"), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Enter wallet address\",\n      value: address,\n      onChange: this.managerAddressChanged,\n      autocomplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }), React.createElement(Form.Text, {\n      className: \"text-muted\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Enter the public key of your manager's wallet\")), React.createElement(Form.Group, {\n      controlId: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"Discount provided by the company\"), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"0\",\n      value: discount,\n      onChange: this.amountChanged,\n      autocomplete: \"off\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Customer's Name\"), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Who is the customer of the Goods/Services?\",\n      value: customerName,\n      onChange: this.CustomerNameChanged,\n      autocomplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), React.createElement(Form.Group, {\n      controlId: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, \"Date as per invoice\"), React.createElement(DatePicker, {\n      selected: selectedInvoiceDate,\n      onChange: this.InvoiceDateChanged,\n      autocomplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }))), React.createElement(Form.Group, {\n      controlId: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Items Listed in the invoice\"), React.createElement(\"div\", {\n      class: \"input-group mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Item Name\",\n      value: itemName,\n      onChange: this.itemNameChanged,\n      autocomplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Quantity\",\n      value: itemQuantity,\n      onChange: this.itemQuantityChanged,\n      autocomplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Price per item\",\n      value: itemPrice,\n      onChange: this.itemPriceChanged,\n      autocomplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"input-group-append\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.addItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Add\"))), React.createElement(\"ul\", {\n      class: \"list-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, this.state.items.map(x => React.createElement(\"div\", {\n      class: \"container \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, x.itemName), React.createElement(\"div\", {\n      className: \"col-sm list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, x.itemQuantity), React.createElement(\"div\", {\n      className: \"col-sm list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, x.itemPrice)))))), React.createElement(Form.Group, {\n      controlId: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \"Total Amount\"), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"What is the total amount of Invoice\",\n      value: amount,\n      onChange: this.amountChanged,\n      autocomplete: \"off\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \"Date within which funds are needed\"), React.createElement(DatePicker, {\n      selected: selectedFinanceDate,\n      onChange: this.FinanceDateChanged,\n      autocomplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, \"Label\"), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Discription\",\n      value: label,\n      onChange: this.labelChanged,\n      autocomplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    })))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: handleCloseDialog,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.submitInvoice,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, \"Submit Invoice\"))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/yashs/Desktop/Computer Science/Web Development/Projects/Hackethons/EPIC TVS/EZ-Discounting/client/src/components/user/CreateInvoice.js"],"names":["React","Component","Modal","Button","Form","Row","Col","DatePicker","InvoiceContract","Web3","require","util","CreateInvoice","constructor","props","submitInvoice","address","pay","type","hours","label","description","perHour","selectedInvoiceDate","selectedFinanceDate","invoiceNumber","customerName","amount","items","storeItem","discount","state","sender_address","window","ethereum","selectedAddress","console","log","payload","toLowerCase","recipient_address","checkInvoice","web3","providers","HttpProvider","currAddress","abi","contractAddress","networks","myContract","eth","Contract","ok","methods","call","addItem","itemName","itemQuantity","itemPrice","push","setState","JSON","stringify","parseFloat","perHourToggle","evt","target","checked","perProject","perProjectToggle","hoursChanged","value","payChanged","managerAddressChanged","labelChanged","descriptionChanged","InvoiceDateChanged","date","FinanceDateChanged","invoiceNumberChanged","CustomerNameChanged","amountChanged","itemNameChanged","itemQuantityChanged","itemPriceChanged","success","componentWillReceiveProps","nextProps","dialogVisible","handleCloseDialog","initializeSuccess","render","alertMessage","currentPayForm","map","x"],"mappings":"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","sourcesContent":["import React, { Component} from 'react';\nimport { Modal, Button, Form, Row, Col } from 'react-bootstrap';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport './user.scss';\nimport InvoiceContract from './Invoices.json'\nconst Web3 = require('web3');\nvar util = require('web3-utils');\n// const [selectedInvoiceDate, setselectedInvoiceDate] = useState(null);\nexport default class CreateInvoice extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { address: '', pay: 0, type: '', hours: 0, perHour: true, perProject: false, label: '', description: '', selectedInvoiceDate: '', selectedFinanceDate: '', invoiceNumber: '', customerName: '', amount: 0, items: [], storeItem: '', success: 'init', discount: 15};\n  }\n  submitInvoice = () => {\n    const { address, pay, type, hours, label, description, perHour,selectedInvoiceDate, selectedFinanceDate, invoiceNumber, customerName, amount, items, storeItem, discount} = this.state;\n\n    const sender_address = window.ethereum.selectedAddress;\n    console.log(\"Sender address is : \" + sender_address);\n\n    const payload = {\n      sender_address: sender_address.toLowerCase(),\n      recipient_address: address.toLowerCase(),\n      amount: amount,\n      description,\n      label,\n      selectedInvoiceDate,\n      selectedFinanceDate,\n      invoiceNumber,\n      customerName,\n      amount,\n      storeItem,\n      discount\n    }\n    this.props.submitInvoice(payload);\n    // this.props.handleCloseDialog();\n  }\n\n  checkInvoice = () => {\n    const {invoiceNumber}  = this.state;\n    // const web3 = window.web3;\n    const web3 = new Web3(new Web3.providers.HttpProvider(\"http://localhost:8545\"));\n    const currAddress = window.ethereum.selectedAddress;\n    let abi = InvoiceContract.abi;\n    let contractAddress = InvoiceContract.networks[5777].address;\n    var myContract = new web3.eth.Contract(abi, contractAddress);\n    let ok = myContract.methods.checkInvoice(currAddress, invoiceNumber).call();\n    console.log(ok);\n  }\n\n  addItem = () => {\n    const {items, itemName, itemQuantity, itemPrice, amount} = this.state;\n    items.push({itemName: itemName, itemQuantity: itemQuantity, itemPrice: itemPrice});\n    this.setState({storeItem: JSON.stringify(items)});\n    this.setState({items: items});\n    this.setState({itemName: '', itemQuantity: '', itemPrice: ''});\n    this.setState({amount: amount+parseFloat(itemQuantity)*parseFloat(itemPrice)})\n    // var li = document.createElement(\"li\");\n    // li.className = 'list-group-item';\n    // li.textContent =itemName;\n    // ul.appendChild(li);\n  }\n\n  perHourToggle = (evt) => {\n    this.setState({ perHour: evt.target.checked, perProject: !evt.target.checked })\n  }\n\n  perProjectToggle = (evt) => {\n    this.setState({ perProject: evt.target.checked, perHour: !evt.target.checked });\n  }\n\n  hoursChanged = (evt) => {\n    this.setState({ hours: evt.target.value });\n  }\n\n  payChanged = (evt) => {\n    this.setState({ pay: evt.target.value });\n  }\n\n  managerAddressChanged = (evt) => {\n    this.setState({ address: evt.target.value });\n  }\n\n  labelChanged = (evt) => {\n    this.setState({ label: evt.target.value });\n  }\n\n  descriptionChanged = (evt) => {\n    this.setState({ description: evt.target.value });\n  }\n  InvoiceDateChanged = (date) => {\n    this.setState({selectedInvoiceDate : date});\n  }\n  FinanceDateChanged = (date) => {\n    this.setState({selectedFinanceDate : date});\n  }\n  invoiceNumberChanged = (evt) => {\n    this.setState({invoiceNumber : evt.target.value});\n  }\n  CustomerNameChanged = (evt) => {\n    this.setState({customerName: evt.target.value});\n  }\n  amountChanged = (evt) => {\n    this.setState({amount: evt.target.value});\n  }\n  itemNameChanged = (evt) => {\n    this.setState({itemName: evt.target.value});\n  }\n  itemQuantityChanged = (evt) => {\n    this.setState({itemQuantity: evt.target.value});\n  }\n  itemPriceChanged = (evt) => {\n    this.setState({itemPrice: evt.target.value});\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { success, dialogVisible } = nextProps;\n    this.setState({success: success});\n    if(success=='init'){\n    }\n    else if(success=='success'){\n      if(dialogVisible){\n        this.props.handleCloseDialog();\n      }\n      else{\n        //change success to 'init'\n        this.props.initializeSuccess();\n      }\n    }\n    else if(success=='failure'){\n\n    }\n  }\n\n  render() {\n    const { success } = this.props;\n    // console.log(success);\n    const { dialogVisible, handleCloseDialog, } = this.props;\n    const { pay, description, perHour, perProject, hours, address, label, selectedInvoiceDate, selectedFinanceDate, invoiceNumber, customerName, amount, itemName, itemQuantity, itemPrice, discount} = this.state;\n\n    let alertMessage = <span/>;\n    if(this.state.success=='failure'){\n      alertMessage = \n      <div class=\"alert alert-danger\" role=\"alert\">\n      Alert! You have already submitted an invoice discounting request with the same invoice number!\n    </div>\n    }\n    let currentPayForm = <span/>;\n    if (perHour) {\n      currentPayForm =\n        <div>\n        <Form.Row>\n          <Col>\n                <Form.Control type=\"text\" placeholder=\"Enter amount\" value={pay} onChange={this.payChanged}/>\n                <Form.Text className=\"text-muted\">\n                    Enter the amount (Ether)\n                </Form.Text>\n           </Col> \n         <Col>\n                <Form.Control type=\"text\" placeholder=\"Enter hours\" value={hours} onChange={this.hoursChanged}/>\n                <Form.Text className=\"text-muted\">\n                    Enter the hours\n                </Form.Text>\n          </Col>     \n        </Form.Row>\n    </div>\n    }\n    else {\n      currentPayForm = <Form.Group>\n          <Form.Control type=\"text\" placeholder=\"Enter amount\" value={pay} onChange={this.payChanged}/>\n          <Form.Text className=\"text-muted\">\n              Enter the amount (Ether)\n          </Form.Text>\n      </Form.Group>\n    }\n    return (\n      <div>\n      <Modal show={dialogVisible} onHide={handleCloseDialog}>\n        <Modal.Header closeButton>\n          <Modal.Title>Submit a new invoice</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n        \n<Form>\n{alertMessage}\n<Form.Group controlId=\"description\">\n   <Form.Label>Invoice Number</Form.Label>\n    <Form.Control type=\"text\" placeholder=\"Enter the unique invoice number\" value={invoiceNumber} onChange={this.invoiceNumberChanged} autocomplete=\"off\"/>\n\n  </Form.Group> \n\n  <Form.Group controlId=\"formBasicEmail\">\n    <Form.Label>Enter the Account number of the Invoice Financing Company</Form.Label>\n    <Form.Control type=\"text\" placeholder=\"Enter wallet address\" value={address} onChange={this.managerAddressChanged} autocomplete=\"off\"/>\n    <Form.Text className=\"text-muted\" >\n      Enter the public key of your manager's wallet\n    </Form.Text>\n  </Form.Group>\n\n\n  <Form.Group controlId=\"description\">\n   <Form.Label>Discount provided by the company</Form.Label>\n    <Form.Control type=\"text\" placeholder=\"0\" value={discount} onChange={this.amountChanged} autocomplete=\"off\" disabled/>\n  </Form.Group> \n\n  <Form.Group controlId=\"description\">\n   <Form.Label>Customer's Name</Form.Label>\n    <Form.Control type=\"text\" placeholder=\"Who is the customer of the Goods/Services?\" value={customerName} onChange={this.CustomerNameChanged} autocomplete=\"off\"/>\n\n    <Form.Group controlId=\"description\">\n   <Form.Label>Date as per invoice</Form.Label>\n      <DatePicker selected={selectedInvoiceDate} onChange={this.InvoiceDateChanged} autocomplete=\"off\"/>\n  </Form.Group>  \n\n  </Form.Group> \n    \n  <Form.Group controlId=\"description\">\n        <Form.Label>Items Listed in the invoice</Form.Label>\n        <div class=\"input-group mb-3\">\n          <Form.Control type=\"text\" placeholder=\"Item Name\" value={itemName} onChange={this.itemNameChanged} autocomplete=\"off\"/>\n          <Form.Control type=\"text\" placeholder=\"Quantity\" value={itemQuantity} onChange={this.itemQuantityChanged} autocomplete=\"off\"/>\n          <Form.Control type=\"text\" placeholder=\"Price per item\" value={itemPrice} onChange={this.itemPriceChanged} autocomplete=\"off\"/>\n          <div class=\"input-group-append\">\n          <Button variant=\"primary\" onClick={this.addItem}>\n            Add\n          </Button>\n          </div>\n        </div>\n        <ul class=\"list-group\">\n        {this.state.items.map(x => (\n        <div class=\"container \">\n        <div class=\"row\">\n          <div className=\"col-sm list-group-item\">\n            {x.itemName}\n          </div>\n          <div className=\"col-sm list-group-item\">\n            {x.itemQuantity}\n          </div>\n          <div className=\"col-sm list-group-item\">\n            {x.itemPrice}\n          </div>\n        </div>\n      </div>\n))}\n          {/* <li class=\"list-group-item\">Jello</li> */}\n        </ul>\n  </Form.Group>  \n\n  <Form.Group controlId=\"description\">\n   <Form.Label>Total Amount</Form.Label>\n    <Form.Control type=\"text\" placeholder=\"What is the total amount of Invoice\" value={amount} onChange={this.amountChanged} autocomplete=\"off\" disabled/>\n  </Form.Group> \n\n\n  <Form.Group controlId=\"description\">\n   <Form.Label>Date within which funds are needed</Form.Label>\n      <DatePicker selected={selectedFinanceDate} onChange={this.FinanceDateChanged} autocomplete=\"off\"/>\n  </Form.Group>  \n\n  <Form.Group controlId=\"description\">\n  <Form.Label>Label</Form.Label>\n  <Form.Control type=\"text\" placeholder=\"Discription\" value={label} onChange={this.labelChanged} autocomplete=\"off\"/>\n  </Form.Group>\n  \n     {/* <Form.Group controlId=\"formBasicEmail\">   \n      <Form.Check  inline\n        type={\"radio\"}\n        id={`default-`}\n        label={`Per Hour`}\n        name=\"projectType\"\n        checked={perHour}\n        onChange={this.perHourToggle}\n      />\n        <Form.Check  inline\n        type={\"radio\"}\n        id={`default-`}\n        label={`Per Project`}\n        checked={perProject}\n        onChange={this.perProjectToggle}\n      />\n      </Form.Group> */}\n      {/* {currentPayForm} */}\n  {/* <Form.Group controlId=\"description\">\n    <Form.Label>Description/Comments</Form.Label>\n    <Form.Control as=\"textarea\" rows=\"3\" value={description} onChange={this.descriptionChanged}/>\n  </Form.Group>    */}\n  </Form>\n        \n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleCloseDialog}>\n            Cancel\n          </Button>\n          <Button variant=\"primary\" onClick={this.submitInvoice}>\n            Submit Invoice\n          </Button>\n        </Modal.Footer>\n      </Modal>      \n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}