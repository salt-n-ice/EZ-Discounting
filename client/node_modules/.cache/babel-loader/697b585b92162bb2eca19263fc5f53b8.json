{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yashs\\\\Desktop\\\\Computer Science\\\\Web Development\\\\Projects\\\\Hackethons\\\\EPIC TVS\\\\Streamworks-master\\\\client\\\\src\\\\components\\\\home\\\\HomeView.js\";\nimport React, { Component } from 'react';\nimport { Row, Col, ListGroup, ListGroupItem, Container, Tabs, Tab, Button } from 'react-bootstrap';\nimport { getAccountDetails } from '../../utils/Web3Utils';\nimport './home.scss';\nimport * as moment from 'moment';\nimport { Link } from 'react-router-dom';\nconst ETHQ_ENDPOINT = process.env.REACT_APP_ETHQ_ENDPOINT;\nexport default class HomeView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.homeTabToggle = toggle => {\n      this.setState({\n        toggle: toggle\n      });\n      this.props.getWalletHistory(toggle);\n    };\n\n    const {\n      user: {\n        walletHistory,\n        userInfo,\n        balance\n      }\n    } = this.props; // const {  numOfInvoicesSent, numOfInvoicesReceived, numOfInvoicesSentPaid, numOfInvoicesReceivedPaid} = this.state;\n\n    let nois = 0;\n    let noir = 0;\n    let noisp = 0;\n    let noirp = 0;\n    const walletAddress = window.ethereum.selectedAddress;\n\n    if (userInfo) {\n      userInfo.forEach(function (infoItem) {\n        if (infoItem.sender_address.toLowerCase() === walletAddress) {\n          // console.log(\"here1\");\n          nois++;\n\n          if (infoItem.status === 'paid') {\n            // this.setState({numOfInvoicesSentPaid: numOfInvoicesSentPaid+1});\n            noisp++;\n          }\n        }\n\n        if (infoItem.recipient_address.toLowerCase() === walletAddress) {\n          // console.log(\"here2\");\n          // this.setState({numOfInvoicesReceived: numOfInvoicesReceived+1});\n          noir++;\n\n          if (infoItem.status === 'paid') {\n            // this.setState({numOfInvoicesReceivedPaid: numOfInvoicesReceivedPaid+1});\n            noirp++;\n          }\n        }\n      }); // this.setState({numOfInvoicesReceived: noir, numOfInvoicesReceivedPaid: noirp, numOfInvoicesSent: nois, numOfInvoicesSentPaid: noisp});      \n    }\n\n    this.state = {\n      toggle: 'to',\n      numOfInvoicesSent: nois,\n      numOfInvoicesReceived: noir,\n      numOfInvoicesSentPaid: noisp,\n      numOfInvoicesReceivedPaid: noirp\n    };\n  }\n\n  componentWillMount() {\n    this.props.getWalletHistory(this.state.toggle);\n    this.props.getUserInfo();\n    const self = this;\n    window.ethereum.on('accountsChanged', function (accounts) {\n      self.props.getWalletEthBalance();\n      self.props.getWalletHistory(self.state.toggle);\n    });\n  }\n\n  componentDidMount() {\n    const self = this;\n    setTimeout(function () {\n      self.props.getWalletEthBalance();\n    }, 1000);\n  }\n\n  render() {\n    const {\n      user: {\n        walletHistory,\n        userInfo,\n        balance\n      }\n    } = this.props;\n    const {\n      numOfInvoicesSent,\n      numOfInvoicesReceived,\n      numOfInvoicesSentPaid,\n      numOfInvoicesReceivedPaid\n    } = this.state;\n    const walletAddress = window.ethereum.selectedAddress;\n    let transactionList = React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    });\n\n    if (walletHistory.length > 0) {\n      transactionList = walletHistory.map(function (data, idx) {\n        let dataNode = data.node;\n        let txNodeData = userInfo.find(function (a) {\n          if (a && a.transaction_hash) {\n            return a.transaction_hash.toLowerCase() === dataNode.hash.toLowerCase();\n          }\n        });\n        let txLabel = \"\";\n        let txDescription = \"\";\n\n        if (txNodeData) {\n          txLabel = txNodeData.label;\n          txDescription = txNodeData.description;\n        }\n\n        let dateString = \"\";\n\n        if (dataNode.block.header.timestamp) {\n          dateString = moment(parseInt(dataNode.block.header.timestamp, 10)).format(\"YY-MM-DD HH:mm\");\n        }\n\n        let toAddress = dataNode.to.substr(0, 5) + \"....\" + dataNode.to.substr(dataNode.to.length - 6, dataNode.to.length - 1);\n        let txHash = dataNode.hash.substr(0, 5) + \"....\" + dataNode.to.substr(dataNode.to.length - 6, dataNode.to.length - 1);\n        return React.createElement(ListGroupItem, {\n          key: `${dataNode.to}-${idx}}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(Col, {\n          lg: 2,\n          className: \"identifier-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"cell-data\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: `${ETHQ_ENDPOINT}/search?q=(from:${dataNode.to}%20OR%20to:${dataNode.to})`,\n          target: \"_blank\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, toAddress)), React.createElement(\"div\", {\n          className: \"cell-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, \"Sender\")), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"cell-data\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: `${ETHQ_ENDPOINT}/tx/${dataNode.hash}`,\n          target: \"_blank\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, txHash)), React.createElement(\"div\", {\n          className: \"cell-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, \"Tx Hash\")))), React.createElement(Col, {\n          lg: 2,\n          className: \"value-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, dataNode.value), React.createElement(Col, {\n          lg: 3,\n          className: \"invoice-description-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"cell-data\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, txLabel), React.createElement(\"div\", {\n          className: \"cell-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, \"Label\")), React.createElement(\"div\", {\n          className: \"cell-data\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, txDescription, React.createElement(\"div\", {\n          className: \"cell-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, \"Description\"))), React.createElement(Col, {\n          lg: 2,\n          className: \"mining-block-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"cell-data\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, dataNode.block.number), React.createElement(\"div\", {\n          className: \"cell-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, \"Mining block\")), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"cell-data\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, dateString), React.createElement(\"div\", {\n          className: \"cell-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, \"Mined on\"))), React.createElement(Col, {\n          lg: 2,\n          className: \"value-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"cell-data\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, dataNode.gasUsed), React.createElement(\"div\", {\n          className: \"cell-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, \"Gas Used (Wei)\")), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"cell-data\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, dataNode.flatCalls ? dataNode.flatCalls[0].inputData : \"\"), React.createElement(\"div\", {\n          className: \"cell-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, \"Input data\")))));\n      });\n    }\n\n    return React.createElement(Container, {\n      className: \"home-page-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"top-info-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"left-label-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cell-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: `${ETHQ_ENDPOINT}/search?q=(from:${walletAddress}%20OR%20to:${walletAddress})`,\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, walletAddress)), React.createElement(\"div\", {\n      className: \"cell-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Address\"))), React.createElement(Col, {\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"left-label-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cell-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, Number(balance).toFixed(2), \" ether\"), React.createElement(\"div\", {\n      className: \"cell-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"Ethereum balance\")))), React.createElement(Row, {\n      className: \"invoice-snapshot-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cell-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, numOfInvoicesSent), React.createElement(\"div\", {\n      className: \"cell-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Created Invoices.\")), React.createElement(Col, {\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cell-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, numOfInvoicesSentPaid), React.createElement(\"div\", {\n      className: \"cell-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"Paid\")), React.createElement(Col, {\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cell-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, numOfInvoicesSent - numOfInvoicesSentPaid), React.createElement(\"div\", {\n      className: \"cell-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Unpaid\")), React.createElement(Col, {\n      lg: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"invoice-btn secondary-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"View Sent Invoices\")))), React.createElement(Row, {\n      className: \"invoice-snapshot-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cell-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, numOfInvoicesReceived), React.createElement(\"div\", {\n      className: \"cell-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Recieved Invoices.\")), React.createElement(Col, {\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cell-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, numOfInvoicesReceivedPaid), React.createElement(\"div\", {\n      className: \"cell-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"Paid\")), React.createElement(Col, {\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cell-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, numOfInvoicesReceived - numOfInvoicesReceivedPaid), React.createElement(\"div\", {\n      className: \"cell-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Unpaid\")), React.createElement(Col, {\n      lg: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/manager\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"invoice-btn secondary-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"View Recieved Invoices\"))))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 12,\n      className: \"invoice-table-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"h4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Latest Invoice Payments\"))), React.createElement(Tabs, {\n      defaultActiveKey: \"to\",\n      id: \"home-view-tab\",\n      onSelect: this.homeTabToggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Tab, {\n      eventKey: \"to\",\n      title: \"Recieved\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(ListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(ListGroupItem, {\n      className: \"list-table-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 2,\n      className: \"invoice-description-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, \"Identifier\"), React.createElement(Col, {\n      lg: 2,\n      className: \"value-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"Amount (Eth)\"), React.createElement(Col, {\n      lg: 3,\n      className: \"invoice-description-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"Invoice Details\"), React.createElement(Col, {\n      lg: 2,\n      className: \"invoice-description-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"Block\"), React.createElement(Col, {\n      lg: 2,\n      className: \"value-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Transaction Data\"))), transactionList)), React.createElement(Tab, {\n      eventKey: \"from\",\n      title: \"Sent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(ListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(ListGroupItem, {\n      className: \"list-table-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 2,\n      className: \"invoice-description-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, \"Identifier\"), React.createElement(Col, {\n      lg: 2,\n      className: \"value-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \"Amount (Eth)\"), React.createElement(Col, {\n      lg: 3,\n      className: \"invoice-description-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \"Invoice Details\"), React.createElement(Col, {\n      lg: 2,\n      className: \"invoice-description-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, \"Block\"), React.createElement(Col, {\n      lg: 2,\n      className: \"value-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"Transaction Data\"))), transactionList))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/yashs/Desktop/Computer Science/Web Development/Projects/Hackethons/EPIC TVS/Streamworks-master/client/src/components/home/HomeView.js"],"names":["React","Component","Row","Col","ListGroup","ListGroupItem","Container","Tabs","Tab","Button","getAccountDetails","moment","Link","ETHQ_ENDPOINT","process","env","REACT_APP_ETHQ_ENDPOINT","HomeView","constructor","props","homeTabToggle","toggle","setState","getWalletHistory","user","walletHistory","userInfo","balance","nois","noir","noisp","noirp","walletAddress","window","ethereum","selectedAddress","forEach","infoItem","sender_address","toLowerCase","status","recipient_address","state","numOfInvoicesSent","numOfInvoicesReceived","numOfInvoicesSentPaid","numOfInvoicesReceivedPaid","componentWillMount","getUserInfo","self","on","accounts","getWalletEthBalance","componentDidMount","setTimeout","render","transactionList","length","map","data","idx","dataNode","node","txNodeData","find","a","transaction_hash","hash","txLabel","txDescription","label","description","dateString","block","header","timestamp","parseInt","format","toAddress","to","substr","txHash","value","number","gasUsed","flatCalls","inputData","Number","toFixed"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Row, Col, ListGroup, ListGroupItem, Container, Tabs, Tab, Button } from 'react-bootstrap';\nimport { getAccountDetails } from '../../utils/Web3Utils';\nimport './home.scss';\nimport * as moment from 'moment';\nimport { Link } from 'react-router-dom';\nconst ETHQ_ENDPOINT = process.env.REACT_APP_ETHQ_ENDPOINT;\n\nexport default class HomeView extends Component {\n  constructor(props) {\n    super(props);\n    const { user: { walletHistory, userInfo, balance } } = this.props;\n    // const {  numOfInvoicesSent, numOfInvoicesReceived, numOfInvoicesSentPaid, numOfInvoicesReceivedPaid} = this.state;\n    let nois = 0;\n    let noir = 0;\n    let noisp = 0;\n    let noirp = 0;\n    const walletAddress = window.ethereum.selectedAddress;\n    if (userInfo) {\n      userInfo.forEach(function(infoItem) {\n        if (infoItem.sender_address.toLowerCase() === walletAddress) {\n          // console.log(\"here1\");\n          \n          nois++;\n          if (infoItem.status === 'paid') {\n            // this.setState({numOfInvoicesSentPaid: numOfInvoicesSentPaid+1});\n            noisp++;\n          }\n        }\n        if (infoItem.recipient_address.toLowerCase() === walletAddress) {\n          // console.log(\"here2\");\n          // this.setState({numOfInvoicesReceived: numOfInvoicesReceived+1});\n          noir++;\n          if (infoItem.status === 'paid') {\n            // this.setState({numOfInvoicesReceivedPaid: numOfInvoicesReceivedPaid+1});\n            noirp++;\n          }\n        }\n      })\n      // this.setState({numOfInvoicesReceived: noir, numOfInvoicesReceivedPaid: noirp, numOfInvoicesSent: nois, numOfInvoicesSentPaid: noisp});      \n    }\n    this.state = { toggle: 'to', numOfInvoicesSent: nois, numOfInvoicesReceived: noir, numOfInvoicesSentPaid: noisp, numOfInvoicesReceivedPaid: noirp};\n  }\n  componentWillMount() {\n    this.props.getWalletHistory(this.state.toggle);\n    this.props.getUserInfo();\n    const self = this;\n\n    window.ethereum.on('accountsChanged', function(accounts) {\n      self.props.getWalletEthBalance();\n      self.props.getWalletHistory(self.state.toggle);\n    })\n  }\n\n  componentDidMount() {\n    const self = this;\n    setTimeout(function() {\n      self.props.getWalletEthBalance();\n    }, 1000);\n  }\n\n  homeTabToggle = (toggle) => {\n    \n    this.setState({ toggle: toggle });\n    this.props.getWalletHistory(toggle);\n  }\n  render() {\n    const { user: { walletHistory, userInfo, balance } } = this.props;\n    const {  numOfInvoicesSent, numOfInvoicesReceived, numOfInvoicesSentPaid, numOfInvoicesReceivedPaid} = this.state;\n    const walletAddress = window.ethereum.selectedAddress;\n    let transactionList = <span/>;\n\n    if (walletHistory.length > 0) {\n      transactionList = walletHistory.map(function(data, idx) {\n        let dataNode = data.node;\n\n        let txNodeData = userInfo.find(function(a) {\n          if (a && a.transaction_hash) {\n            return a.transaction_hash.toLowerCase() === dataNode.hash.toLowerCase();\n          }\n        });\n\n        let txLabel = \"\";\n        let txDescription = \"\";\n\n        if (txNodeData) {\n          txLabel = txNodeData.label;\n          txDescription = txNodeData.description;\n        }\n        let dateString = \"\";\n        if (dataNode.block.header.timestamp) {\n          dateString = moment(parseInt(dataNode.block.header.timestamp, 10)).format(\"YY-MM-DD HH:mm\");\n        }\n        let toAddress = dataNode.to.substr(0, 5) + \"....\" + dataNode.to.substr(dataNode.to.length - 6, dataNode.to.length - 1);\n        let txHash = dataNode.hash.substr(0, 5) + \"....\" + dataNode.to.substr(dataNode.to.length - 6, dataNode.to.length - 1);\n        return <ListGroupItem key={`${dataNode.to}-${idx}}`}>\n        <Row>\n          <Col lg={2} className=\"identifier-container\">\n            <div>\n              <div className=\"\">\n                <div className=\"cell-data\"><a href={`${ETHQ_ENDPOINT}/search?q=(from:${dataNode.to}%20OR%20to:${dataNode.to})`} target=\"_blank\">{toAddress}</a></div>\n                <div className=\"cell-label\">Sender</div>\n                </div>\n              <div>\n                <div className=\"cell-data\"><a href={`${ETHQ_ENDPOINT}/tx/${dataNode.hash}`} target=\"_blank\">{txHash}</a></div>\n                <div className=\"cell-label\">Tx Hash</div>\n              </div>\n            </div>\n          </Col>\n          <Col lg={2} className=\"value-container\">{dataNode.value}</Col>\n          <Col lg={3} className=\"invoice-description-container\">\n            <div>\n            <div className=\"cell-data\">{txLabel}</div>\n            <div className=\"cell-label\">Label</div>\n            </div>\n            <div className=\"cell-data\">\n              {txDescription}\n            <div className=\"cell-label\">Description</div>\n            </div>\n          </Col>\n          <Col lg={2} className=\"mining-block-container\">\n            <div>\n              <div className=\"cell-data\">{dataNode.block.number}</div>\n              <div className=\"cell-label\">Mining block</div>\n            </div>\n            <div>\n              <div className=\"cell-data\">{dateString}</div>\n              <div className=\"cell-label\">Mined on</div>\n            </div>\n          </Col>\n          <Col lg={2} className=\"value-container\">\n            <div>\n            <div className=\"cell-data\">{dataNode.gasUsed}</div>\n            <div className=\"cell-label\">Gas Used (Wei)</div>\n            </div>\n            <div>\n            <div className=\"cell-data\">{dataNode.flatCalls ? dataNode.flatCalls[0].inputData : \"\"}</div>\n            <div className=\"cell-label\">Input data</div>            \n            </div>\n          </Col>\n        </Row>\n        </ListGroupItem>\n      })\n    }\n    return (\n      <Container className=\"home-page-container\">\n        <div className=\"top-info-container\">\n          <Row>\n          <Col lg={6}>\n            <div className=\"left-label-container\">\n              <div className=\"cell-value\"><a href={`${ETHQ_ENDPOINT}/search?q=(from:${walletAddress}%20OR%20to:${walletAddress})`} target=\"_blank\">{walletAddress}</a></div>\n              <div className=\"cell-label\">Address</div> \n            </div>\n          </Col>\n          <Col lg={3}>\n            <div className=\"left-label-container\">\n              <div className=\"cell-value\">{Number(balance).toFixed(2)} ether</div>\n              <div className=\"cell-label\">Ethereum balance</div>\n            </div>\n          </Col>\n          </Row>\n          <Row className=\"invoice-snapshot-row\">\n              <Col lg={3}>\n              <div className=\"cell-value\">{numOfInvoicesSent}</div>\n              <div className=\"cell-label\">Created Invoices.</div>\n              </Col>\n              <Col lg={3}>\n              <div className=\"cell-value\">{numOfInvoicesSentPaid}</div>\n              <div className=\"cell-label\">Paid</div>\n              </Col>\n              <Col lg={3}>\n                <div className=\"cell-value\">{numOfInvoicesSent - numOfInvoicesSentPaid}</div>\n                <div className=\"cell-label\">Unpaid</div>\n              </Col>\n              <Col lg={2}>\n               <Link to=\"/user\">\n               <Button className=\"invoice-btn secondary-btn\">View Sent Invoices</Button>\n               </Link>\n              </Col>\n          </Row>\n     \n          <Row className=\"invoice-snapshot-row\">\n              <Col lg={3}>\n              <div className=\"cell-value\">{numOfInvoicesReceived}</div>\n              <div className=\"cell-label\">Recieved Invoices.</div>\n              </Col>\n              <Col lg={3}>\n              <div className=\"cell-value\">{numOfInvoicesReceivedPaid}</div>\n              <div className=\"cell-label\">Paid</div>\n              </Col>\n              <Col lg={3}>\n                <div className=\"cell-value\">{numOfInvoicesReceived - numOfInvoicesReceivedPaid}</div>\n                <div className=\"cell-label\">Unpaid</div>\n              </Col>\n              <Col lg={2}>\n                <Link to=\"/manager\">\n                  <Button className=\"invoice-btn secondary-btn\">View Recieved Invoices</Button></Link>\n              </Col>\n          </Row>\n          </div>\n          <Row>\n            <Col lg={12} className=\"invoice-table-header\">\n            <div className=\"h4\">Latest Invoice Payments</div>\n            </Col>\n          </Row>\n          <Tabs defaultActiveKey=\"to\" id=\"home-view-tab\" onSelect={this.homeTabToggle}>\n            <Tab eventKey=\"to\" title=\"Recieved\">\n              <ListGroup>\n                <ListGroupItem className=\"list-table-header\"> \n                <Row>\n                  <Col lg={2} className=\"invoice-description-label\">\n                    Identifier\n                  </Col>\n                  <Col lg={2} className=\"value-label\">\n                    Amount (Eth)\n                  </Col>\n                  <Col lg={3} className=\"invoice-description-label\">\n                    Invoice Details\n                  </Col>\n                  \n                  <Col lg={2} className=\"invoice-description-label\">\n                    Block\n                  </Col>\n                  <Col lg={2} className=\"value-label\">\n                    Transaction Data\n                  </Col>\n                  </Row>\n                </ListGroupItem>\n                {transactionList}\n              </ListGroup>\n            </Tab>\n            <Tab eventKey=\"from\" title=\"Sent\">\n              <ListGroup>\n                <ListGroupItem className=\"list-table-header\"> \n                <Row>\n                  <Col lg={2} className=\"invoice-description-label\">\n                    Identifier\n                  </Col>\n                  <Col lg={2} className=\"value-label\">\n                    Amount (Eth)\n                  </Col>\n                  <Col lg={3} className=\"invoice-description-label\">\n                    Invoice Details\n                  </Col>\n                  <Col lg={2} className=\"invoice-description-label\">\n                    Block\n                  </Col>\n                  <Col lg={2} className=\"value-label\">\n                    Transaction Data\n                  </Col>\n                  </Row>\n                </ListGroupItem>\n                \n                {transactionList}\n              </ListGroup>\n            </Tab>\n        </Tabs>  \n      </Container>\n\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}