{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yashs\\\\Desktop\\\\Computer Science\\\\Web Development\\\\Projects\\\\Hackethons\\\\EPIC TVS\\\\Streamworks-master\\\\client\\\\src\\\\components\\\\user\\\\UserView.js\";\nimport React, { Component } from 'react';\nimport { Row, Col, ListGroup, ListGroupItem, Container, Tabs, Tab, Button } from 'react-bootstrap';\nimport CreateInvoice from './CreateInvoice';\nimport { isNonEmptyArray } from '../../utils/ObjectUtils';\nimport { checkIfPaymentStatusUpdate } from '../../utils/ObjectUtils';\nimport UserInvoiceList from './UserInvoiceList';\nimport TransactionStatus from '../transaction/TransactionStatus';\nimport './user.scss';\nimport '../home/home.scss';\nexport default class UserView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.listenForInvoicePayments = () => {\n      const self = this;\n      this.timer = setInterval(function () {\n        self.props.getPreviousInvoices();\n      }, 1000);\n    };\n\n    this.showDialog = () => {\n      this.setState({\n        dialogVisible: true\n      });\n    };\n\n    this.handleCloseDialog = () => {\n      this.setState({\n        dialogVisible: false\n      });\n    };\n\n    this.homeTabToggle = toggle => {\n      this.setState({\n        toggle: toggle\n      });\n    };\n\n    this.state = {\n      toggle: 'unpaid',\n      dialogVisible: false,\n      pendingTransactions: []\n    };\n  }\n\n  componentWillMount() {\n    this.props.getPreviousInvoices();\n    this.listenForInvoicePayments();\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {\n      user: {\n        previousInvoices,\n        success\n      }\n    } = nextProps; // console.log(success);\n\n    if (previousInvoices && this.props.user.previousInvoices.length > 0) {\n      let invoiceDiff = checkIfPaymentStatusUpdate(previousInvoices, this.props.user.previousInvoices);\n\n      if (isNonEmptyArray(invoiceDiff)) {\n        let currentPendingTransactions = this.state.pendingTransactions;\n        currentPendingTransactions.push(invoiceDiff);\n        this.setState({\n          pendingTransactions: currentPendingTransactions\n        });\n      }\n    }\n  }\n\n  render() {\n    const {\n      dialogVisible,\n      pendingTransactions\n    } = this.state;\n    const {\n      user\n    } = this.props;\n    let pendingTransactionList = React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    });\n\n    if (isNonEmptyArray(pendingTransactions)) {\n      pendingTransactionList = pendingTransactions.map(function (item, idx) {\n        return React.createElement(TransactionStatus, {\n          key: `${item}+${idx}`,\n          transaction_hash: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        });\n      });\n    }\n\n    let invoiceList = React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    });\n\n    if (user.previousInvoices.length > 0) {\n      invoiceList = React.createElement(UserInvoiceList, {\n        previousInvoices: user.previousInvoices,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      });\n    } else {\n      invoiceList = React.createElement(\"div\", {\n        className: \"empty-list-container empty-user-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"You haven't created any invoices yet.\");\n    }\n\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, pendingTransactionList, React.createElement(CreateInvoice, {\n      dialogVisible: dialogVisible,\n      handleCloseDialog: this.handleCloseDialog,\n      submitInvoice: this.props.submitInvoice,\n      success: user.success,\n      initializeSuccess: this.props.initializeSuccess,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(Row, {\n      className: \"add-invoice-btn-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.showDialog,\n      className: \"add-invoice-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Submit New Invoice\")), React.createElement(Col, {\n      lg: 9,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })), React.createElement(Tabs, {\n      defaultActiveKey: \"unpaid\",\n      id: \"home-view-tab\",\n      onSelect: this.homeTabToggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(Tab, {\n      eventKey: \"unpaid\",\n      title: \"Unpaid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(ListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(ListGroupItem, {\n      className: \"list-table-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, invoiceList))))), React.createElement(Tab, {\n      eventKey: \"paid\",\n      title: \"Paid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(ListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(ListGroupItem, {\n      className: \"list-table-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 2,\n      className: \"invoice-description-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Identifier\"), React.createElement(Col, {\n      lg: 2,\n      className: \"value-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Amount (Eth)\"), React.createElement(Col, {\n      lg: 3,\n      className: \"invoice-description-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Invoice Details\"), React.createElement(Col, {\n      lg: 2,\n      className: \"invoice-description-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Block\"), React.createElement(Col, {\n      lg: 2,\n      className: \"value-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Transaction Data\")))))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/yashs/Desktop/Computer Science/Web Development/Projects/Hackethons/EPIC TVS/Streamworks-master/client/src/components/user/UserView.js"],"names":["React","Component","Row","Col","ListGroup","ListGroupItem","Container","Tabs","Tab","Button","CreateInvoice","isNonEmptyArray","checkIfPaymentStatusUpdate","UserInvoiceList","TransactionStatus","UserView","constructor","props","listenForInvoicePayments","self","timer","setInterval","getPreviousInvoices","showDialog","setState","dialogVisible","handleCloseDialog","homeTabToggle","toggle","state","pendingTransactions","componentWillMount","componentWillUnmount","clearInterval","componentWillReceiveProps","nextProps","user","previousInvoices","success","length","invoiceDiff","currentPendingTransactions","push","render","pendingTransactionList","map","item","idx","invoiceList","submitInvoice","initializeSuccess"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Row, Col, ListGroup, ListGroupItem, Container, Tabs, Tab, Button } from 'react-bootstrap';\nimport CreateInvoice from './CreateInvoice';\nimport { isNonEmptyArray } from '../../utils/ObjectUtils';\nimport { checkIfPaymentStatusUpdate } from '../../utils/ObjectUtils';\nimport UserInvoiceList from './UserInvoiceList';\nimport TransactionStatus from '../transaction/TransactionStatus';\nimport './user.scss';\nimport '../home/home.scss'\n\nexport default class UserView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { toggle: 'unpaid', dialogVisible: false, pendingTransactions: [] };\n  }\n  componentWillMount() {\n    this.props.getPreviousInvoices();\n\n    this.listenForInvoicePayments();\n  }\n\n\n\n  listenForInvoicePayments = () => {\n    const self = this;\n    this.timer = setInterval(function() {\n      self.props.getPreviousInvoices();\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n  componentWillReceiveProps(nextProps) {\n    const { user: { previousInvoices , success} } = nextProps;\n    // console.log(success);\n    if (previousInvoices && this.props.user.previousInvoices.length > 0) {\n      let invoiceDiff = checkIfPaymentStatusUpdate(previousInvoices, this.props.user.previousInvoices);\n      if (isNonEmptyArray(invoiceDiff)) {\n        let currentPendingTransactions = this.state.pendingTransactions;\n        currentPendingTransactions.push(invoiceDiff);\n        this.setState({ pendingTransactions: currentPendingTransactions })\n      }\n    }\n  }\n\n  showDialog = () => {\n    this.setState({ dialogVisible: true });\n  }\n\n  handleCloseDialog = () => {\n    this.setState({ dialogVisible: false });\n  }\n\n  homeTabToggle = (toggle) => {\n    \n    this.setState({ toggle: toggle });\n  }\n\n  render() {\n    const { dialogVisible, pendingTransactions } = this.state;\n    const { user } = this.props;\n    let pendingTransactionList = <span/>;\n    if (isNonEmptyArray(pendingTransactions)) {\n      pendingTransactionList =\n        pendingTransactions.map(function(item, idx) {\n          return <TransactionStatus key={`${item}+${idx}`} transaction_hash={item}/>;\n        });\n    }\n\n    let invoiceList = <span/>;\n    if (user.previousInvoices.length > 0) {\n      invoiceList = <UserInvoiceList previousInvoices={user.previousInvoices}/>;\n    }\n    else {\n      invoiceList = <div className=\"empty-list-container empty-user-list\">You haven't created any invoices yet.</div>\n    }\n    return (\n      <Container>\n      \n      {pendingTransactionList}\n      <CreateInvoice dialogVisible={dialogVisible} handleCloseDialog={this.handleCloseDialog} submitInvoice={this.props.submitInvoice} success={user.success} initializeSuccess={this.props.initializeSuccess}/>\n      <Row className=\"add-invoice-btn-row\">\n        <Col lg={3}>\n        <Button onClick={this.showDialog} className=\"add-invoice-btn\">Submit New Invoice</Button>\n        </Col>\n        <Col lg={9}>\n        \n        </Col>\n      </Row>\n      \n      <Tabs defaultActiveKey=\"unpaid\" id=\"home-view-tab\" onSelect={this.homeTabToggle}>\n            <Tab eventKey=\"unpaid\" title=\"Unpaid\">\n              <ListGroup>\n                <ListGroupItem className=\"list-table-header\"> \n                  <Row> \n                    <Col lg={12}>\n                      {invoiceList}\n                    </Col>\n                  </Row>\n                </ListGroupItem>\n                {/* {transactionList} */}\n              </ListGroup>\n            </Tab>\n            <Tab eventKey=\"paid\" title=\"Paid\">\n              <ListGroup>\n                <ListGroupItem className=\"list-table-header\"> \n                <Row>\n                  <Col lg={2} className=\"invoice-description-label\">\n                    Identifier\n                  </Col>\n                  <Col lg={2} className=\"value-label\">\n                    Amount (Eth)\n                  </Col>\n                  <Col lg={3} className=\"invoice-description-label\">\n                    Invoice Details\n                  </Col>\n                  <Col lg={2} className=\"invoice-description-label\">\n                    Block\n                  </Col>\n                  <Col lg={2} className=\"value-label\">\n                    Transaction Data\n                  </Col>\n                  </Row>\n                </ListGroupItem>\n                \n                {/* {transactionList} */}\n              </ListGroup>\n            </Tab>\n        </Tabs>  \n      </Container>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}